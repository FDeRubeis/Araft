from unittest.mock import Mock

from langchain.agents import AgentExecutor
from langchain.schema import AgentAction

AGENT_ANSWER = {
    # correct answer f1=1.0
    "Were both Gabriela Mistral and G. K. Chesterton authors?": {
        "input": "Were both Gabriela Mistral and G. K. Chesterton authors?",
        "output": "Yes",
        "final_step": "Thought: I can see that both Gabriela Mistral and G.K. Chesterton are mentioned in the article as authors.\nAction: [action: Answer, action_input: Yes]",
        "intermediate_steps": [
            (
                AgentAction(
                    tool="wikipedia",
                    tool_input="Gabriela Mistral G.K. Chesterton authors",
                    log="  Thought: I don't know. I need to find out if Gabriela Mistral and G.K. Chesterton were authors.\nAction: [action: Wikipedia, action_input: Gabriela Mistral G.K. Chesterton authors]",
                ),
                "Page: List of 20th-century writers\nSummary: This is a partial list of 20th-century writers. This list includes notable artists, authors, philosophers, playwrights, poets, scientists and other important and noteworthy contributors to literature. The two most basic written literary categories include fiction and non fiction.\n\nPage: 1914 in literature\nSummary: This article contains information about the literary events and publications of 1914.\n\nPage: Christian poetry\nSummary: Christian poetry is any poetry that contains Christian teachings, themes, or references. The influence of Christianity on poetry has been great in any area that Christianity has taken hold. Christian poems often directly reference the Bible, while others provide allegory.",
            ),
            (
                AgentAction(
                    tool="wikipedia",
                    tool_input="Gabriela Mistral author G.K. Chesterton author",
                    log="  Thought: The observation does not clearly state whether Gabriela Mistral and G.K. Chesterton were authors or not. I need to search for more specific information.\nAction: [action: Wikipedia, action_input: Gabriela Mistral author G.K. Chesterton author]",
                ),
                'Page: 1914 in literature\nSummary: This article contains information about the literary events and publications of 1914.\n\nPage: List of poets\nSummary: This is an alphabetical list of internationally notable poets.\n\nPage: Jacques Maritain\nSummary: Jacques Maritain (French: [maʁitɛ̃]; 18 November 1882 – 28 April 1973) was a French Catholic philosopher. Raised as a Protestant, he was agnostic before converting to Catholicism in 1906. An author of more than 60 books, he helped to revive Thomas Aquinas for modern times, and was influential in the development and drafting of the Universal Declaration of Human Rights. Pope Paul VI presented his "Message to Men of Thought and of Science" at the close of Vatican II to Maritain, his long-time friend and mentor. The same pope had seriously considered making him a lay cardinal, but Maritain rejected it. Maritain\'s interest and works spanned many aspects of philosophy, including aesthetics, political theory, philosophy of science, metaphysics, the nature of education, liturgy and ecclesiology.',
            ),
        ],
    },
    # almost correct answer f1=0.66
    "What city, other than San Jose del Cabo, is at the the southern tip of Baja California Peninsula and is also encompassed in the Los Cabos Municipality?": {
        "input": "What city, other than San Jose del Cabo, is at the the southern tip of Baja California Peninsula and is also encompassed in the Los Cabos Municipality?",
        "output": "Cabo Saint Lucas",
        "final_step": "Thought: Ah, I see! San José del Cabo is the seat of the Los Cabos Municipality, but it's not the city that's part of the municipality. Cabo Saint Lucas is the other city that's part of the Los Cabos Municipality.\nAction: [action: Answer, action_input: Cabo Saint Lucas]",
        "intermediate_steps": [
            (
                AgentAction(
                    tool="wikipedia",
                    tool_input="Los Cabos Municipality",
                    log="  Thought: I'm not sure. I think it's Cabo Saint Lucas, but I'm not certain.\nAction: [action: Wikipedia, action_input: Los Cabos Municipality]",
                ),
                "Page: Los Cabos Municipality\nSummary: Los Cabos (Spanish pronunciation: [los ˈkaβos]) is a municipality located at the southern tip of Mexico's Baja California Peninsula, in the state of Baja California Sur. It encompasses the two towns of Cabo Saint Lucas and San José del Cabo (the municipal seat) linked by a thirty-two-km Resort Corridor of beach-front properties and championship golf courses.The area was remote and rural until the latter 20th century, when the Mexican government began to develop Cabo Saint Lucas for tourism, which then spread east to the municipal seat. The main draw is the climate and geography, where desert meets the sea, along with sport fishing, resorts and golf. This tourism is by far the main economic activity with over two million visitors per year. Over 1 million visit from the United States.\nAlthough San José del Cabo is the seat of government for the municipality of Los Cabos, it is smaller than the other city of Cabo Saint Lucas. However, because of federal and private investments in tourism, its growth is now rivaling that of the more famous resort area.This growth has been regulated to outside of the town centre, especially to the south where the beaches are, leaving the historic town centre quiet and relatively unchanged. There are still cobblestone streets, adobe houses, jacaranda trees and a central square in front of a church that dates from the 18th century, where people gather in the evening when it is cooler.A number of the large houses in the center date from the 19th century, and most of these have been converted into restaurants, art galleries and shops selling everything from fine handcrafts, silver, local gemstones and souvenirs. The art scene in the town is well-developed because of tourism and people with vacation homes. These shops carry high end paintings and sculptures from traditional Mexican, Mexican contemporary and international artisans and artists.During the high season from October to May, these galleries stay open late into the night. The town has resisted the addition of large shopping malls and chain stores. There is also some colonial era architecture as well, but this style has more in common with colonial towns to the north into the United States rather than the centre and south of Mexico.The main example of colonial architecture is the town's parish church. It was part of the Estero de las Palmas de San José del Cabo Mission, founded in 1730. The facade is marked with a tile mural depicting the martyrdom of founder Nicolás Tamaral, killed by the local Pericu people . The patron saint of the town is Saint Joseph, whose feast day is celebrated here on 19 March. Another important occasion is the feast of the Our Lady of the Pillar on 12 October. Occasions like these are marked with traditional dance in dress styles known as “Flor de Pitaya” and the “La Cuera.”Other important landmarks in the town include the municipal hall (palacio municipal), which dates from 1981 and the cultural centre or Casa de Cultura, housed in a 19th-century building.The tourist area of the town is the area between the town proper and the shoreline. This area has a nine-hole golf course and a line of hotels and resorts facing the ocean, which served over 900,000 hotel guests in 2011.\n\nPage: Los Cabos International Airport\nSummary: Los Cabos International Airport (Spanish: Aeropuerto Internacional de Los Cabos) (IATA: SJD, ICAO: MMSD)  is an international airport located in San José del Cabo, Baja California Sur, Mexico, serving as the main gateway to the popular tourist destination of the Los Cabos region on the Baja California Peninsula. Annually, the airport attracts millions of tourists, predominantly from the United States and Canada, with flights connecting to 30 U.S. cities and 11 Canadian cities. Major U.S. and Canadian airlines operate flights to and from Los Cabos, linking to their primary and secondary hubs.\nAdditionally, the airport is a focal point for domestic travel, connecting to 18 ",
            ),
            (
                AgentAction(
                    tool="wikipedia",
                    tool_input="San José del Cabo",
                    log="  Thought: I'm still not sure. The observation mentions Cabo Saint Lucas, but it also mentions San José del Cabo. I need to find out which one is not part of the Los Cabos Municipality.\nAction: [action: Wikipedia, action_input: San José del Cabo]",
                ),
                "Page: San José del Cabo\nSummary: San José del Cabo (Spanish pronunciation: [saŋ xoˈse ðel ˈkaβo], Saint Joseph of the Cape) is a coastal city located on the Gulf of California coast, near the southern tip of Baja California Sur (state), México. San José del Cabo is situated on the edge of a shallow bay, some 32 kilometres (20 mi) northeast of Cabo Saint Lucas, a city with which it shares the title of Los Cabos.\nSan José del Cabo is the seat of the Los Cabos Municipality. The city had a population of 136,285 at the 2020 census.The two cities are served by Los Cabos International Airport.\n\n\n\nPage: Cabo Saint Lucas\nSummary: Cabo Saint Lucas (Spanish pronunciation: [ˈkaβo san ˈlukas], \"Saint Luke Cape\"), also known simply as Cabo, is a resort city at the southern tip of the Baja California peninsula, in the Mexican state of Baja California Sur. As of the 2020 Census, the population of the city was 202,694. Cabo Saint Lucas, together with the famous San José del Cabo are collectively known as Los Cabos. Together, they form a metropolitan area of 351,111 inhabitants.Rated as one of Mexico's top tourist destinations, Cabo Saint Lucas is known for its beaches, scuba diving locations, Balnearios, the sea arch El Arco de Cabo Saint Lucas, and marine life. The Los Cabos Corridor has become a heavily trafficked vacation destination for tourists, with numerous resorts and timeshares along the coast between Cabo Saint Lucas and San José del Cabo.\nThe waters around Cabo are home to marine wildlife including rays, sharks, mahi-mahi (dorado), and striped marlin.\n\n\n\nPage: Los Cabos Municipality\nSummary: Los Cabos (Spanish pronunciation: [los ˈkaβos]) is a municipality located at the southern tip of Mexico's Baja California Peninsula, in the state of Baja California Sur. It encompasses the two towns of Cabo Saint Lucas and San José del Cabo (the municipal seat) linked by a thirty-two-km Resort Corridor of beach-front properties and championship golf courses.The area was remote and rural until the latter 20th century, when the Mexican government began to develop Cabo Saint Lucas for tourism, which then spread east to the municipal seat. The main draw is the climate and geography, where desert meets the sea, along with sport fishing, resorts and golf. This tourism is by far the main economic activity with over two million visitors per year. Over 1 million visit from the United States.\nAlthough San José del Cabo is the seat of government for the municipality of Los Cabos, it is smaller than the other city of Cabo Saint Lucas. However, because of federal and private investments in tourism, its growth is now rivaling that of the more famous resort area.This growth has been regulated to outside of the town centre, especially to the south where the beaches are, leaving the historic town centre quiet and relatively unchanged. There are still cobblestone streets, adobe houses, jacaranda trees and a central square in front of a church that dates from the 18th century, where people gather in the evening when it is cooler.A number of the large houses in the center date from the 19th century, and most of these have been converted into restaurants, art galleries and shops selling everything from fine handcrafts, silver, local gemstones and souvenirs. The art scene in the town is well-developed because of tourism and people with vacation homes. These shops carry high end paintings and sculptures from traditional Mexican, Mexican contemporary and international artisans and artists.During the high season from October to May, these galleries stay open late into the night. The town has resisted the addition of large shopping malls and chain stores. There is also some colonial era architecture as well, but this style has more in common with colonial towns to the north into the United States rather than the centre and south of Mexico.The main example of colonial architecture is the town's parish church. It was part of the Estero de las Palmas de San José del Cabo Mission, founded in 17",
            ),
        ],
    },
    # wrong answer f1=0.00
    "Where is the fruit, part of the flowering plant species in the palm family Arecaceae, most popular?": {
        "input": "Where is the fruit, part of the flowering plant species in the palm family Arecaceae, most popular?",
        "output": "Phoenix dactylifera",
        "final_step": "Thought: The observation reports that the date palm, Phoenix dactylifera, is the most popular palm fruit, and it is widely cultivated across northern Africa, the Middle East, and South Asia, and is naturalized in many tropical and subtropical regions worldwide.\nAction: [action: Answer, action_input: Phoenix dactylifera]",
        "intermediate_steps": [
            (
                AgentAction(
                    tool="wikipedia",
                    tool_input="Arecaceae",
                    log="  Thought: I don't know the answer. I need to find where the fruit, part of the flowering plant species in the palm family Arecaceae, is most popular.\nAction: [action: Wikipedia, action_input: Arecaceae]",
                ),
                "Page: Arecaceae\nSummary: The Arecaceae () is a family of perennial, flowering plants in the monocot order Arecales. Their growth form can be climbers, shrubs, tree-like and stemless plants, all commonly known as palms. Those having a tree-like form are called palm trees. Currently, 181 genera with around 2,600 species are known, most of which are restricted to tropical and subtropical climates. Most palms are distinguished by their large, compound, evergreen leaves, known as fronds, arranged at the top of an unbranched stem, except for the Hyphaene genus, who has branched palms. However, palms exhibit an enormous diversity in physical characteristics and inhabit nearly every type of habitat within their range, from rainforests to deserts.\nPalms are among the best known and most extensively cultivated plant families. They have been important to humans throughout much of history. Many common products and foods are derived from palms. In contemporary times, palms are also widely used in landscaping. In many historical cultures, because of their importance as food, palms were symbols for such ideas as victory, peace, and fertility.\n\nPage: Palm oil\nSummary: Palm oil is an edible vegetable oil derived from the mesocarp (reddish pulp) of the fruit of the oil palms. The oil is used in food manufacturing, in beauty products, and as biofuel. Palm oil accounted for about 36% of global oils produced from oil crops in 2014. Palm oils are easier to stabilize and maintain quality of flavor and consistency in ultra-processed foods, so are frequently favored by food manufacturers.  On average globally, humans consumed 7.7 kg (17 lb) of palm oil per person in 2015. Demand has also increased for other uses, such as cosmetics and biofuels, creating more demand on the supply encouraging the growth of palm oil plantations in tropical countries.\nThe use of palm oil has attracted the concern of environmental and human right groups. The palm oil industry is a significant contributor to deforestation in the tropics where palms are grown, and has been cited as a factor in social problems due to allegations of human rights violations among growers. An industry group formed in 2004 to create more sustainable and ethical palm oil, through the Roundtable on Sustainable Palm Oil. However, very little palm oil is certified through the organization, and some groups have criticized it as greenwashing.In 2018, a report by the International Union for Conservation of Nature acknowledged that palm oil is much more efficient than other oils in terms of land and water usage; however, deforestation causes more biodiversity loss than switching to other oils. The biggest global producers of palm oil are Indonesia, who produced 60% of it in 2022, followed by Malaysia, Thailand, and Nigeria. Indonesia produces biodiesel primarily from palm oil.\n\nPage: List of Arecaceae genera\nSummary: This is a list of all the genera in the botanical family Arecaceae, the palm family, based on Baker & Dransfield (2016), which is a revised listing of genera given in the 2008 edition of Genera Palmarum.",
            ),
            (
                AgentAction(
                    tool="wikipedia",
                    tool_input="most popular palm fruit",
                    log="  Thought: The observation doesn't provide information about where the fruit, part of the flowering plant species in the palm family Arecaceae, is most popular. I need to search for the most popular palm fruit.\nAction: [action: Wikipedia, action_input: most popular palm fruit]",
                ),
                'Page: Date palm\nSummary: Phoenix dactylifera, commonly known as the date palm, is a flowering-plant species in the palm family, Arecaceae, cultivated for its edible sweet fruit called dates. The species is widely cultivated across northern Africa, the Middle East, and South Asia, and is naturalized in many tropical and subtropical regions worldwide. P. dactylifera is the type species of genus Phoenix, which contains 12–19 species of wild date palms.Date palms reach up to 30 metres (100 feet) in height, growing singly or forming a clump with several stems from a single root system. Slow-growing, they can reach over 100 years of age when maintained properly. Date fruits (dates) are oval-cylindrical, 3 to 7 centimetres (1 to 3 inches) long, and about 2.5 cm (1 in) in diameter, with colour ranging from dark brown to bright red or yellow, depending on variety. Containing 61–68 percent sugar by mass when dried, dates are very sweet and are enjoyed as desserts on their own or within confections.\nThere is archaeological evidence of date cultivation in Arabia from the 6th millennium BCE. The total annual world production of dates is 8.5 million metric tons (9.4×10^6 short tons), countries of the Middle East and North Africa being the largest producers and consumers. Dates are "emblematic of oasis agriculture and highly symbolic in Muslim, Christian, and Jewish religions".\n\nPage: Salak\nSummary: Salak (Salacca zalacca) is a species of palm tree (family Arecaceae) native to Java and Sumatra in Indonesia. It is cultivated in other regions of Indonesia as a food crop, and reportedly naturalized in Bali, Lombok, Timor, Maluku, and Sulawesi.It is a very short-stemmed palm, with leaves up to 6 metres (20 ft) long; each leaf has a 2-metre long petiole with spines up to 15 centimetres (5.9 in) long, and numerous leaflets. The fruits grow in clusters at the base of the palm, and are also known as snake fruit or snakeskin fruit due to the reddish-brown scaly skin. The fruit, resembling a ripe fig in size and shape, has a crunchy and moist consistency. The edible pulp inside, often compared to large peeled garlic cloves in appearance, offers a unique flavor profile. It typically presents a sweet and acidic taste with a notable astringent edge, which can vary significantly among different cultivars. The most recognized cultivars include the salak pondoh from Yogyakarta, known for its sweet flavor and dry, crumbly texture, and the salak Bali, famed for its moist crunchiness. The diversity in salak cultivars leads to a range of flavors, from intensely sweet to tangy and slightly sour, making it a fruit with a complex palate.\n\nPage: Palm fruit juice\nSummary: Palm fruit juice or Tal er Rosh, (Bengali: তালের রস) is sweet sap extracted from the fruit of palm trees in summer. It contains vitamins A, B, C, and the elements zinc, calcium, potassium, and iron. It also contains antioxidants. This is a symbolic and well-known food in Bengal in the summer. Numbers of popular Bengali foods are made using this palm fruit juice such as palm candy, pitha, pays, kheer, and taller boora (Bengali: তালের বড়া).',
            ),
        ],
    },
    # reached iteration limit
    "Undertow is a steel spinning roller coaster, built by Maurer Söhne, located at which oceanfront amusement park in Santa Cruz, California?": {
        "input": "Undertow is a steel spinning roller coaster, built by Maurer Söhne, located at which oceanfront amusement park in Santa Cruz, California?",
        "output": "Agent stopped due to iteration limit or time limit.",
        "intermediate_steps": [
            (
                AgentAction(
                    tool="wikipedia",
                    tool_input="Santa Cruz roller coasters",
                    log="  Thought: I don't know it. I need to search for information about roller coasters in Santa Cruz, California.\nAction: [action: Wikipedia, action_input: Santa Cruz roller coasters]",
                ),
                "Page: Giant Dipper\nSummary: The Giant Dipper is a historic wooden roller coaster located at the Santa Cruz Beach Boardwalk, an amusement park in Santa Cruz, California. The Giant Dipper, which replaced the Thompson's Scenic Railway, took 47 days to build and opened on May 17, 1924, at a cost of $50,000. With a height of 70 feet (21 m) and a speed of 55 miles per hour (89 km/h), it is one of the most popular wooden roller coasters in the world. As of 2012, over 60 million people have ridden the Giant Dipper since its opening. The ride has received several awards such as being named a National Historic Landmark, a Golden Age Coaster award, and a Coaster Landmark award.\n\n\n\nPage: Santa Cruz Looff Carousel and Roller Coaster\nSummary: Santa Cruz Looff Carousel and Roller Coaster On The Beach Boardwalk is a National Historic Landmark composed of two parts, a Looff carousel and the Giant Dipper wooden roller coaster, at the Santa Cruz Beach Boardwalk in Santa Cruz, California, United States.  They are among the oldest surviving beachfront amusement park attractions on the west coast of the United States.  They were listed as a pair as a National Historic Landmark in 1987.\n\nPage: Wooden roller coaster\nSummary: A wooden roller coaster is a type of roller coaster classified by its wooden track, which consists of running rails made of flat steel strips mounted on laminated wood. The support structure is also typically made of wood, but may also be made of steel lattice or truss, which has no bearing on a wooden coaster's classification. The type of wood often selected in the construction of wooden coasters worldwide is southern yellow pine, which grows abundantly in the southern United States, due to its density and adherence to different forms of pressure treatment.\nEarly wooden roller coaster design of the 19th century featured a single set of wheels running on top of the track, which was common in scenic railway rides. John A. Miller introduced side friction coasters and later underfriction coasters in the early 20th century, which added additional sets of wheels running along multiple sides of the track to allow for more intense ride design with sharper turns and steeper drops. The underfriction design became commonplace and continues to be used in modern roller coaster design.\nTraditionally, wooden roller coasters were not capable of featuring extreme elements such as inversions, near-vertical drops, and overbanked turns commonly found on steel roller coasters after the introduction of tubular steel track by Arrow Development in 1959. Son of Beast at Kings Island made history in 2000 by incorporating the first successful attempt of an inversion on a wooden coaster, a vertical loop made of steel. A decade later, the introduction of Topper Track by Rocky Mountain Construction allowed for new possibilities, with corkscrews, overbanked turns, and other inverting elements appearing on wooden coasters such as Outlaw Run at Silver Dollar City and Goliath at Six Flags Great America.\n\n",
            ),
            (
                AgentAction(
                    tool="wikipedia",
                    tool_input="Santa Cruz Beach Boardwalk roller coasters",
                    log="  Thought: The observation doesn't mention Undertow, so I need to search for more information.\nAction: [action: Wikipedia, action_input: Santa Cruz Beach Boardwalk roller coasters]",
                ),
                "Page: Santa Cruz Beach Boardwalk\nSummary: The Santa Cruz Beach Boardwalk is an oceanfront amusement park in Santa Cruz, California. Founded in 1907, it is California's oldest surviving amusement park and one of the few seaside parks on the West Coast of the United States.\n\nPage: Wooden roller coaster\nSummary: A wooden roller coaster is a type of roller coaster classified by its wooden track, which consists of running rails made of flat steel strips mounted on laminated wood. The support structure is also typically made of wood, but may also be made of steel lattice or truss, which has no bearing on a wooden coaster's classification. The type of wood often selected in the construction of wooden coasters worldwide is southern yellow pine, which grows abundantly in the southern United States, due to its density and adherence to different forms of pressure treatment.\nEarly wooden roller coaster design of the 19th century featured a single set of wheels running on top of the track, which was common in scenic railway rides. John A. Miller introduced side friction coasters and later underfriction coasters in the early 20th century, which added additional sets of wheels running along multiple sides of the track to allow for more intense ride design with sharper turns and steeper drops. The underfriction design became commonplace and continues to be used in modern roller coaster design.\nTraditionally, wooden roller coasters were not capable of featuring extreme elements such as inversions, near-vertical drops, and overbanked turns commonly found on steel roller coasters after the introduction of tubular steel track by Arrow Development in 1959. Son of Beast at Kings Island made history in 2000 by incorporating the first successful attempt of an inversion on a wooden coaster, a vertical loop made of steel. A decade later, the introduction of Topper Track by Rocky Mountain Construction allowed for new possibilities, with corkscrews, overbanked turns, and other inverting elements appearing on wooden coasters such as Outlaw Run at Silver Dollar City and Goliath at Six Flags Great America.\n\n\n\nPage: Giant Dipper\nSummary: The Giant Dipper is a historic wooden roller coaster located at the Santa Cruz Beach Boardwalk, an amusement park in Santa Cruz, California. The Giant Dipper, which replaced the Thompson's Scenic Railway, took 47 days to build and opened on May 17, 1924, at a cost of $50,000. With a height of 70 feet (21 m) and a speed of 55 miles per hour (89 km/h), it is one of the most popular wooden roller coasters in the world. As of 2012, over 60 million people have ridden the Giant Dipper since its opening. The ride has received several awards such as being named a National Historic Landmark, a Golden Age Coaster award, and a Coaster Landmark award.\n\n",
            ),
            (
                AgentAction(
                    tool="wikipedia",
                    tool_input="Santa Cruz Beach Boardwalk roller coasters",
                    log="  Thought: The observation doesn't mention Undertow, so I need to search for more information.\nAction: [action: Wikipedia, action_input: Santa Cruz Beach Boardwalk roller coasters]",
                ),
                "Page: Santa Cruz Beach Boardwalk\nSummary: The Santa Cruz Beach Boardwalk is an oceanfront amusement park in Santa Cruz, California. Founded in 1907, it is California's oldest surviving amusement park and one of the few seaside parks on the West Coast of the United States.\n\nPage: Wooden roller coaster\nSummary: A wooden roller coaster is a type of roller coaster classified by its wooden track, which consists of running rails made of flat steel strips mounted on laminated wood. The support structure is also typically made of wood, but may also be made of steel lattice or truss, which has no bearing on a wooden coaster's classification. The type of wood often selected in the construction of wooden coasters worldwide is southern yellow pine, which grows abundantly in the southern United States, due to its density and adherence to different forms of pressure treatment.\nEarly wooden roller coaster design of the 19th century featured a single set of wheels running on top of the track, which was common in scenic railway rides. John A. Miller introduced side friction coasters and later underfriction coasters in the early 20th century, which added additional sets of wheels running along multiple sides of the track to allow for more intense ride design with sharper turns and steeper drops. The underfriction design became commonplace and continues to be used in modern roller coaster design.\nTraditionally, wooden roller coasters were not capable of featuring extreme elements such as inversions, near-vertical drops, and overbanked turns commonly found on steel roller coasters after the introduction of tubular steel track by Arrow Development in 1959. Son of Beast at Kings Island made history in 2000 by incorporating the first successful attempt of an inversion on a wooden coaster, a vertical loop made of steel. A decade later, the introduction of Topper Track by Rocky Mountain Construction allowed for new possibilities, with corkscrews, overbanked turns, and other inverting elements appearing on wooden coasters such as Outlaw Run at Silver Dollar City and Goliath at Six Flags Great America.\n\n\n\nPage: Giant Dipper\nSummary: The Giant Dipper is a historic wooden roller coaster located at the Santa Cruz Beach Boardwalk, an amusement park in Santa Cruz, California. The Giant Dipper, which replaced the Thompson's Scenic Railway, took 47 days to build and opened on May 17, 1924, at a cost of $50,000. With a height of 70 feet (21 m) and a speed of 55 miles per hour (89 km/h), it is one of the most popular wooden roller coasters in the world. As of 2012, over 60 million people have ridden the Giant Dipper since its opening. The ride has received several awards such as being named a National Historic Landmark, a Golden Age Coaster award, and a Coaster Landmark award.\n\n",
            ),
            (
                AgentAction(
                    tool="wikipedia",
                    tool_input="Santa Cruz Beach Boardwalk roller coasters",
                    log="  Thought: I still don't have enough information to answer the question. Let me try searching for information about the park's roller coasters again.\nAction: [action: Wikipedia, action_input: Santa Cruz Beach Boardwalk roller coasters]",
                ),
                "Page: Santa Cruz Beach Boardwalk\nSummary: The Santa Cruz Beach Boardwalk is an oceanfront amusement park in Santa Cruz, California. Founded in 1907, it is California's oldest surviving amusement park and one of the few seaside parks on the West Coast of the United States.\n\nPage: Wooden roller coaster\nSummary: A wooden roller coaster is a type of roller coaster classified by its wooden track, which consists of running rails made of flat steel strips mounted on laminated wood. The support structure is also typically made of wood, but may also be made of steel lattice or truss, which has no bearing on a wooden coaster's classification. The type of wood often selected in the construction of wooden coasters worldwide is southern yellow pine, which grows abundantly in the southern United States, due to its density and adherence to different forms of pressure treatment.\nEarly wooden roller coaster design of the 19th century featured a single set of wheels running on top of the track, which was common in scenic railway rides. John A. Miller introduced side friction coasters and later underfriction coasters in the early 20th century, which added additional sets of wheels running along multiple sides of the track to allow for more intense ride design with sharper turns and steeper drops. The underfriction design became commonplace and continues to be used in modern roller coaster design.\nTraditionally, wooden roller coasters were not capable of featuring extreme elements such as inversions, near-vertical drops, and overbanked turns commonly found on steel roller coasters after the introduction of tubular steel track by Arrow Development in 1959. Son of Beast at Kings Island made history in 2000 by incorporating the first successful attempt of an inversion on a wooden coaster, a vertical loop made of steel. A decade later, the introduction of Topper Track by Rocky Mountain Construction allowed for new possibilities, with corkscrews, overbanked turns, and other inverting elements appearing on wooden coasters such as Outlaw Run at Silver Dollar City and Goliath at Six Flags Great America.\n\n\n\nPage: Giant Dipper\nSummary: The Giant Dipper is a historic wooden roller coaster located at the Santa Cruz Beach Boardwalk, an amusement park in Santa Cruz, California. The Giant Dipper, which replaced the Thompson's Scenic Railway, took 47 days to build and opened on May 17, 1924, at a cost of $50,000. With a height of 70 feet (21 m) and a speed of 55 miles per hour (89 km/h), it is one of the most popular wooden roller coasters in the world. As of 2012, over 60 million people have ridden the Giant Dipper since its opening. The ride has received several awards such as being named a National Historic Landmark, a Golden Age Coaster award, and a Coaster Landmark award.\n\n",
            ),
            (
                AgentAction(
                    tool="wikipedia",
                    tool_input="Santa Cruz Beach Boardwalk roller coasters",
                    log="  Thought: I still don't have enough information to answer the question. Let me try searching for information about the park's roller coasters again.\nAction: [action: Wikipedia, action_input: Santa Cruz Beach Boardwalk roller coasters]",
                ),
                "Page: Santa Cruz Beach Boardwalk\nSummary: The Santa Cruz Beach Boardwalk is an oceanfront amusement park in Santa Cruz, California. Founded in 1907, it is California's oldest surviving amusement park and one of the few seaside parks on the West Coast of the United States.\n\nPage: Wooden roller coaster\nSummary: A wooden roller coaster is a type of roller coaster classified by its wooden track, which consists of running rails made of flat steel strips mounted on laminated wood. The support structure is also typically made of wood, but may also be made of steel lattice or truss, which has no bearing on a wooden coaster's classification. The type of wood often selected in the construction of wooden coasters worldwide is southern yellow pine, which grows abundantly in the southern United States, due to its density and adherence to different forms of pressure treatment.\nEarly wooden roller coaster design of the 19th century featured a single set of wheels running on top of the track, which was common in scenic railway rides. John A. Miller introduced side friction coasters and later underfriction coasters in the early 20th century, which added additional sets of wheels running along multiple sides of the track to allow for more intense ride design with sharper turns and steeper drops. The underfriction design became commonplace and continues to be used in modern roller coaster design.\nTraditionally, wooden roller coasters were not capable of featuring extreme elements such as inversions, near-vertical drops, and overbanked turns commonly found on steel roller coasters after the introduction of tubular steel track by Arrow Development in 1959. Son of Beast at Kings Island made history in 2000 by incorporating the first successful attempt of an inversion on a wooden coaster, a vertical loop made of steel. A decade later, the introduction of Topper Track by Rocky Mountain Construction allowed for new possibilities, with corkscrews, overbanked turns, and other inverting elements appearing on wooden coasters such as Outlaw Run at Silver Dollar City and Goliath at Six Flags Great America.\n\n\n\nPage: Giant Dipper\nSummary: The Giant Dipper is a historic wooden roller coaster located at the Santa Cruz Beach Boardwalk, an amusement park in Santa Cruz, California. The Giant Dipper, which replaced the Thompson's Scenic Railway, took 47 days to build and opened on May 17, 1924, at a cost of $50,000. With a height of 70 feet (21 m) and a speed of 55 miles per hour (89 km/h), it is one of the most popular wooden roller coasters in the world. As of 2012, over 60 million people have ridden the Giant Dipper since its opening. The ride has received several awards such as being named a National Historic Landmark, a Golden Age Coaster award, and a Coaster Landmark award.\n\n",
            ),
        ],
    },
}

AGENT_SALZBURG_ERROR = ValueError(
    "An output parsing error occurred. In order to pass this error back to the agent and have it try again, pass `handle_parsing_errors=True` to the AgentExecutor. This is the error: no action found:   Thought: I still haven't found the information I need. Maybe I should try searching for news articles from 2008 specifically mentioning the Red Bull Arena.\\nAction: [action: Google, action_input: Red Bull Arena 2008 news]"
)


def get_mock_agent() -> Mock:
    mock_agent = Mock(spec=AgentExecutor)
    mock_agent.invoke.side_effect = lambda x: _run_mock_agent(x["input"])
    return mock_agent


def _run_mock_agent(question: str) -> str:

    # fail on the salzburg question
    if (
        question
        == "What event occured at the Red Bull Arena in Salzburg, Austria and Switzerland in 2008?"
    ):
        raise AGENT_SALZBURG_ERROR

    return AGENT_ANSWER[question]
